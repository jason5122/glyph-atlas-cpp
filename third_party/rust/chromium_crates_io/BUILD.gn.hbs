# @generated from third_party/rust/chromium_crates_io/BUILD.gn.hbs by
# tools/crates/gnrt.
# Do not edit!

{{#each rules}}
rust_library("{{this.name}}") {
  {{#with this.detail}}
  {{#if crate_name}}
  crate_name = "{{crate_name}}"
  {{/if}}
  crate_type = "{{crate_type}}"
  crate_root = "{{crate_root}}"
  sources = [
    {{#each sources}}
    "{{this}}",
    {{/each}}
  ]
  inputs = [
    {{#each inputs}}
    "{{this}}",
    {{/each}}
  ]

  {{#each deps}}
  {{#if @first}}
  deps = [
    {{#if ../dep_on_lib}}
    ":lib",
    {{/if}}
    {{#each this.packages}}
      "//third_party/rust/{{this.name}}/{{this.epoch}}:lib",
    {{/each}}
  ]
  {{else}}
  if ({{this.cond}}) {
    deps += [
      {{#each this.packages}}
      "//third_party/rust/{{this.name}}/{{this.epoch}}:lib",
      {{/each}}
    ]
  }
  {{/if}}
  {{/each}}
  {{#if aliased_deps}}
  aliased_deps = {
    {{#each aliased_deps}}
    {{this.0}} = "{{this.1}}"
    {{/each}}
  }
  {{/if}}
  {{#each build_deps}}
  {{#if @first}}
  build_deps = [
    {{#each this.packages}}
      "//third_party/rust/{{this.name}}/{{this.epoch}}:buildrs_support",
    {{/each}}
  ]
  {{else}}
  if ({{this.cond}}) {
    build_deps += [
    {{#each this.packages}}
      "//third_party/rust/{{this.name}}/{{this.epoch}}:buildrs_support",
    {{/each}}
    ]
  }
  {{/if}}
  {{/each}}
  {{#if build_root}}
  build_root = "{{build_root}}"
  build_sources = [
    {{#each build_script_sources}}
    "{{this}}",
    {{/each}}
  ]
  {{#with build_script_inputs}}
  build_script_inputs = [
    {{#each this}}
    "{{this}}",
    {{/each}}
  ]
  {{/with}}
  {{#with build_script_outputs}}
  build_script_outputs = [
    {{#each this}}
    "{{this}}",
    {{/each}}
  ]
  {{/with}}
  {{/if}}
  {{#if rustenv}}
  rustenv = [
    {{#each rustenv}}
    "{{this}}",
    {{/each}}
  ]
  {{/if}}
  rustflags = [
    "--edition={{edition}}",
  {{#if features}}
    {{#each features}}
    "--cfg=feature=\"{{this}}\"",
    {{/each}}
  {{/if}}
  {{#if rustflags}}
    {{#each rustflags}}
    "{{this}}",
    {{/each}}
  {{/if}}
  ]
  {{#if output_dir}}
  output_dir = "{{output_dir}}"
  {{/if}}
  {{#if native_libs}}
  native_libs = [
  {{#each native_libs}}
    "{{this}}",
  {{/each}}
  ]
  {{/if}}
  {{/with}}

  {{#if gn_visibility.public}}
  {{#if detail.extra_kv.visibility}}
  visibility = []
  {{/if}}
  {{else}}
  # Only for usage from third-party crates. Add the crate to
  # //third_party/rust/chromium_crates_io/Cargo.toml to use
  # it from first-party code.
  visibility = [ "//third_party/rust/*" ]
  {{/if}}
  {{#each detail.extra_kv.visibility}}
  visibility += [ "{{this}}" ]
  {{/each}}
  {{#if gn_visibility.testonly}}
  testonly = true
  {{/if}}
}
{{/each}}
