import("//build/config/mac/icon.gni")
import("//build/config/mac/mac_app_bundle.gni")

if (is_mac) {
  mac_app_bundle("app") {
    output_name = "Simple Text"
    bundle_identifier = "com.jason5122.simple-text"
    info_plist = "resources/Info.plist"

    # define `code_signing_identity` in args.gn

    sources = [
      "main.cc",
      "main_app.cc",

      # "main_mac.mm",
    ]

    frameworks = [ "Cocoa.framework" ]

    deps = [
      # ":icon",
      "//ui/app",
      # "//ui/cocoa",
    ]
  }
  # icon("icon") {
  #   sources = [ "resources/app.iconset" ]
  # }
}

if (is_linux) {
  executable("app") {
    output_name = "simple_text"

    sources = [
      "main.cc",
      "main_app.cc",

      # "main_linux.cc",
    ]

    deps = [
      "//ui/app",
      "//ui/gtk",
    ]
  }
}

if (is_win) {
  executable("app") {
    output_name = "simple_text"

    sources = [
      "main.cc",
      "main_app.cc",
    ]

    # sources = [ "main_win.cc" ]

    # sources = [ "damn.cc" ]

    defines = [
      "UNICODE",
      "_UNICODE",
      "WIN32_LEAN_AND_MEAN",

      # // https://stackoverflow.com/a/13420838/14698275
      "NOMINMAX",
    ]

    libs = [
      "user32",
      "opengl32",
      "gdi32",
      "dwrite",
      "shcore",
    ]
    deps = [
      "//base",
      "//ui/app",
      "//util",
    ]

    public_deps = [
      "//third_party/glad",
      "//ui/renderer",
    ]

    # deps = [ "//ui/win32" ]
  }
}
